<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=1900">
    <title>o-38
    </title>
    <style>
        html,
        body {
            margin: 0;
            overflow: hidden;
        }
    </style>
    <link rel="stylesheet" href="vendor/reveal/reset.css">
    <link rel="stylesheet" href="vendor/reveal/reveal.css">
    <link rel="stylesheet" href="vendor/reveal/theme/sky.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="vendor/reveal/plugin/highlight/zenburn.css">
    <!--edit-->
    <!-- Pollyfill script -->
    <script src="https://unpkg.com/core-js-bundle@3.6.1/minified.js"></script>
    <!-- Live2DCubismCore script -->
    <script src="./dist/live2dcubismcore.js"></script>
    <!-- Build script -->
    <script src="./dist/bundle.js"></script>
    <style>
        ul,
        ol {
            list-style: none;
            margin-left: 0;
        }

        .reveal {
            position: absolute;
            left: 0;
            top: 0;
            font-size: 26px;
        }

        #pageIndex {
            position: absolute;
            right: 24px;
            bottom: 24px;
            background: #000;
            color: #fff;
            font-size: 20px;
        }

        .controls {
            bottom: 24px !important;
        }

        table,
        th,
        td {
            border: 1px solid black;
        }
    </style>
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <!--
            data-no: 老師網頁的cubism人物編號(從0開始，網頁上的編號-1)
            data-positionx: cubism人物水平位移範圍(建議-1 ~ 0.9)
            data-positiony: cubism人物垂直位移範圍(建議-0.9~0.4)
            data-scale: cubism人物縮放(建議1~2之間的小數值，最大極限是3)
            data-motionno: cubism人物指定動作編號(從0開始，請參閱model3.json檔案的ALL MOTION GROUP)
            -->
            <section>
                <h3>38. 部落旅遊</h3>
                <section data-no="6" data-positionx="0.8" data-positiony="0.03" data-scale="1" data-motionno="0"
                    style="text-align: left"><br>
                    小明獲得一個尋寶祕笈和一支鑰匙A，依此找到第一個山洞（如下圖編號 1），發現裡面有三個寶箱（X, Y, Z），而鑰匙A只能夠打開寶箱X，裡面裝著一些數量的黃金G1 和另一支鑰匙 B。而鑰匙 B
                    只能夠打開寶箱Y或寶箱Z的其中一個。<br>
                    Y寶箱裡面裝有編號2山洞的寶箱X的鑰匙A1；Z寶箱裡面裝有編號4山洞的寶箱X的鑰匙A2。小明只能利用鑰匙 B 開啟寶箱Y 或寶箱 Z後往下一個山洞尋寶。<br>
                    <img src="img/38/38.png">
                </section>
            </section>

            <section>
                <h3>38. 部落旅遊</h3>
                <section data-no="6" data-positionx="0.8" data-positiony="0.03" data-scale="1" data-motionno="0"
                    style="text-align: left"><br>
                    山洞有以下規則：<br>
                    &emsp;&emsp;1. 山洞只有分空的山洞、或是有X、Y、Z三個寶箱的山洞。<br>
                    &emsp;&emsp;2. 寶箱 X 藏有某數量的黃金和一把鑰匙B。鑰匙B只能開啟寶箱Y或寶箱 Z其中一個，開啟後鑰匙B即失效。<br>
                    &emsp;&emsp;3.寶箱 Y、Z各藏有一把鑰匙 A1、A2，各可指引開啟下一個山洞的寶箱 X。下一個山洞可能是空的山洞或是已經走過的山洞，若是如此則尋寶之旅結束。<br>
                    &emsp;&emsp;4. 空的山洞沒有黃金也沒有寶箱。<br>
                    請寫一個程式找出可以獲得最多黃金的山洞編號順序的黃金數量。<br>
                </section>
            </section>

            <section>
                <h3>輸入說明</h3>
                <section data-no="6" data-positionx="0.8" data-positiony="0.03" data-scale="1" data-motionno="0"
                    style="text-align: left"><br>
                    輸入說明：<br><br>
                    第一行：輸入兩個整數，分別為山洞個數N（3<=N<=10），以及第一個進入的山洞編號K。<br>
                        第2~N+1行：每行輸入四個整數，分別是山洞編號、黃金數量、下一個可以前往的兩個山洞編號。<br>
                </section>
            </section>

            <section>
                <h3>範例輸入說明</h3>
                <section data-no="6" data-positionx="0.8" data-positiony="0.03" data-scale="1" data-motionno="0"
                    style="text-align: left"><br>
                    5 1 （共5個山洞，由編號1進入）<br>
                    1 6 2 4 （編號1的山洞，有6個黃金，可通到編號2、編號4的山洞）<br>
                    2 5 3 4 （編號2的山洞，有5個黃金，可通到編號3、編號4的山洞）<br>
                    3 7 2 5 （編號3的山洞，有7個黃金，可通到編號2、編號5的山洞）<br>
                    4 4 2 3 （編號4的山洞，有4個黃金，可通到編號2、編號3的山洞）<br>
                    5 0 0 0 （編號5的山洞，為一個空的山洞）<br>
                </section>
            </section>

            <section>
                <h3>輸出說明</h3>
                <section data-no="6" data-positionx="0.8" data-positiony="0.03" data-scale="1" data-motionno="0"
                    style="text-align: left"><br>
                    輸出說明：<br>
                    &emsp;&emsp;輸出從山洞編號K進入後，所能獲得的最多黃金數量。<br><br>
                    範例輸出說明：<br>
                    &emsp;&emsp;22 （共經過山洞1、2、4、3、5，共獲得6+5+7+4 = 22個黃金）<br>
                </section>
            </section>

            <section>
                <section data-no="6" data-positionx="0.8" data-positiony="0.03" data-scale="1" data-motionno="0"
                    style="text-align: left">
                    <table style="background-color: #fff; width: 100%; font-size: 20px;">
                        <tr>
                            <th>輸入輸出範例</th>
                            <th>Input</th>
                            <th>Output</th>
                        </tr>
                        <tr>
                            <td>測試資料一</td>
                            <td>
                                6 1<br>1 6 2 4<br>2 5 3 4<br>3 7 2 5<br>4 4 2 5<br>5 0 0 0<br>6 9 1 3
                            </td>
                            <td>
                                22
                            </td>
                        </tr>
                        <tr>
                            <td>測試資料二</td>
                            <td>
                                4 5<br>5 3 6 7<br>6 3 5 7<br>7 6 5 6<br>8 0 0 0
                            </td>
                            <td>
                                12
                            </td>
                        </tr>
                        <tr>
                            <td>測試資料三</td>
                            <td>
                                10 1<br>1 9 5 6<br>2 3 1 3<br>3 8 4 7<br>4 0 0 0<br>5 5 6 9<br>6 7 5 8<br>7 1 1 8<br>8
                                10 3 10<br>9 0 0 0<br>10 3 2 8
                            </td>
                            <td>
                                46
                            </td>
                        </tr>
                    </table>
                </section>
            </section>

            <section>
                <section data-no="6" data-positionx="0.8" data-positiony="0.03" data-scale="1" data-motionno="0"
                    style="text-align: left">
                    <table style="background-color: #fff; width: 100%; font-size: 20px;">
                        <tr>
                            <th>輸入輸出範例</th>
                            <th>Input</th>
                            <th>Output</th>
                        </tr>
                        <tr>
                            <td>測試資料四</td>
                            <td>
                                7 2<br>2 3 4 6<br>3 4 4 8<br>4 1 6 8<br>5 7 2 6<br>6 5 5 7<br>7 7 6 8<br>8 2 3 7
                            </td>
                            <td>
                                25
                            </td>
                        </tr>
                    </table>
                </section>
            </section>

            <section>
                <h3>解答</h3>
                <section data-no="8" data-positionx="0.8" data-positiony="0.03" data-scale="1" data-motionno="0"
                    style="text-align: left"><br><br>
                    <section data-auto-animate>
                        <pre><code data-trim data-noescape>
                        def findMaxValueDFS(s,caveGraph,pathStack):
                            # 如果節點 s 已在路徑棧中，或 s 等於 0，則返回 0
                            if s in pathStack or s == 0:
                                return 0
                            else:
                                # 將節點 s 加入路徑棧
                                pathStack.append(s)
                                # 計算當前節點的金礦數量，並遞迴計算子節點路徑的最大值
                                result = caveGraph[s]["Gold"] + max( findMaxValueDFS(caveGraph[s]["Next1"],caveGraph,pathStack),
                                                                    findMaxValueDFS(caveGraph[s]["Next2"],caveGraph,pathStack))
                                # 回溯，從路徑棧中移除節點 s
                                pathStack.pop()
                                return result

                        def findMaxValue(s,caveGraph):
                            # 初始化路徑棧，並將起始節點加入路徑棧
                            pathStack = list()
                            pathStack.append(s)
                            # 返回起始節點的金礦數量，加上從兩個可能的下一步節點中獲取的最大值
                            return caveGraph[s]["Gold"] + max(findMaxValueDFS(caveGraph[s]["Next1"],caveGraph,pathStack),
                                                            findMaxValueDFS(caveGraph[s]["Next2"],caveGraph,pathStack))

                        def main():
                            # 讀取節點數量 n 和起始節點 k
                            n,k = [int(x) for x in input().split()]
                            caveGraph = dict()
                            # 讀取每個節點的金礦數量及其兩個相鄰節點
                            for _ in range(n):
                                idx,gold,Y,Z = [int(x) for x in input().split()]
                                caveInfo = dict()
                                caveInfo["Gold"] = gold
                                caveInfo["Next1"] = Y
                                caveInfo["Next2"] = Z
                                caveGraph[idx] = caveInfo

                            # 計算從起始節點出發可獲得的最大金礦數量並輸出結果
                            result = findMaxValue(k,caveGraph)
                            print(result)

                        main()
                    </code></pre>
                    </section>
                </section>
            </section>
        </div>
    </div>
    <div id="pageIndex"></div>
    <!-- reveal.js-->
    <script src="vendor/reveal/reveal.js"></script>
    <!--plugin-->
    <script src="vendor/reveal/plugin/math/math.js"></script>
    <script src="vendor/reveal/plugin/search/search.js"></script>
    <script src="vendor/reveal/plugin/zoom/zoom.js"></script>

    <script src="vendor/reveal/plugin/notes/notes.js"></script>
    <script src="vendor/reveal/plugin/markdown/markdown.js"></script>
    <script src="vendor/reveal/plugin/highlight/highlight.js"></script>
    <script src="main-ppt.js"></script>
</body>

</html>